# **volatile**

**作用是一个共享的变量（类的成员变量、类的静态成员变量）**

>  当成员或者静态变量被volatile修饰后 , 这也就代表着该变量被赋予了两层语义

1.保证了不同的线程对这个变量操作的可见性, 即一个线程修改了这个变量 , 那么这个新的值对于另外的线程是立即可见的.





2.禁止进行指令重排序。 





volatile的实现原理



2.2.1 volatile 可见性实现

volatile 变量的内存可见性是基于内存屏障（Memory Barrier）实现。

- 内存屏障，又称内存栅栏，是一个 CPU 指令。
- 在程序运行时，为了提高执行性能，编译器和处理器会对指令进行重排序，JMM 为了保证在不同的编译器和 CPU 上有相同的结果，通过插入特定类型的内存屏障来禁止特定类型的编译器重排序和处理器重排序，插入一条内存屏障会告诉编译器和 CPU：不管什么指令都不能和这条 Memory Barrier 指令重排序。









使用场景 

经常被用于一些并发很高的时候 , 当我们需要修改成员变量的值并且不让其出现线程安全问题的时候





[volatile实现详情](https://www.jianshu.com/p/ccfe24b63d87)